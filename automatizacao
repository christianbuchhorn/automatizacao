// ==UserScript==
// @name         Automação Paineis Ganha Tempo
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Automação de painel com salvamento de log consolidado no fechamento da página
// @author       Carlos Christian Buchhorn Clair / Victor Hugo Santos de Moraes
// @match        https://ganhatempo.seplag.mt.gov.br/ns-panel/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=gov.br
// @grant        GM_download
// @run-at       document-idle
// ==/UserScript==

function _0xc9fc(_0xe33c7f,_0x545aad){const _0x34f84b=_0x34f8();return _0xc9fc=function(_0xc9fcb6,_0x581195){_0xc9fcb6=_0xc9fcb6-0x1d0;let _0x4112da=_0x34f84b[_0xc9fcb6];return _0x4112da;},_0xc9fc(_0xe33c7f,_0x545aad);}function _0x34f8(){const _0x1404a6=['a.router-link-active[href=\x22#/\x22]','text/plain','325688rxmZXI','✅\x20Clique\x20simulado\x20com\x20sucesso.','error','763938RmgBca','click','now','body','querySelector','length','🚀\x20Script\x20de\x20automação\x20com\x20log\x20consolidado\x20ativado','mouseup','loading','div#app\x20>\x20div:nth-of-type(1)\x20>\x20div:nth-of-type(1)\x20>\x20div:nth-of-type(2)\x20>\x20form:nth-of-type(1)\x20>\x20div:nth-of-type(4)\x20>\x20div:nth-of-type(1)\x20>\x20button:nth-of-type(1)','💾\x20Botão\x20Salvar\x20clicado','html\x20>\x20body\x20>\x20div:nth-of-type(2)\x20>\x20div:nth-of-type(1)\x20>\x20div:nth-of-type(4)\x20>\x20div:nth-of-type(1)\x20>\x20button:nth-of-type(1)','77eoahYq','✅\x20Botão\x20OK\x20clicado','⚠️\x20Botão\x20OK\x20não\x20encontrado.','❌\x20Erro\x20ao\x20tentar\x20clicar\x20em\x20Salvar:','148262YgtIRL','backButton','slice','192sqPWLE','DOMContentLoaded','dispatchEvent','queda-log.txt','9HCjFnu','trim','log','saveButton','612yKcTdC','14015LKYGDP','4160060LluCgz','⚠️\x20Botão\x20Salvar\x20não\x20encontrado.','readyState','⚙️\x20Automação\x20iniciada...','✅\x20Botão\x20OK\x20final\x20clicado','98772TOeLGX','4VaVJqM','pt-BR','mousedown','beforeunload','addEventListener','127824GsBpyK','📝\x20Queda\x20registrada:\x20','⚠️\x20Botão\x20OK\x20final\x20não\x20encontrado.','okButton','toTimeString','then','observe','disconnect'];_0x34f8=function(){return _0x1404a6;};return _0x34f8();}(function(_0x2a5233,_0x3eef5b){const _0x2764a4=_0xc9fc,_0x33af76=_0x2a5233();while(!![]){try{const _0x5413ff=-parseInt(_0x2764a4(0x1f8))/0x1*(parseInt(_0x2764a4(0x1d6))/0x2)+parseInt(_0x2764a4(0x1e8))/0x3+parseInt(_0x2764a4(0x203))/0x4*(-parseInt(_0x2764a4(0x204))/0x5)+parseInt(_0x2764a4(0x1d5))/0x6*(-parseInt(_0x2764a4(0x1f4))/0x7)+-parseInt(_0x2764a4(0x1db))/0x8+parseInt(_0x2764a4(0x1ff))/0x9*(parseInt(_0x2764a4(0x1d0))/0xa)+parseInt(_0x2764a4(0x1e5))/0xb*(parseInt(_0x2764a4(0x1fb))/0xc);if(_0x5413ff===_0x3eef5b)break;else _0x33af76['push'](_0x33af76['shift']());}catch(_0x7ab29f){_0x33af76['push'](_0x33af76['shift']());}}}(_0x34f8,0x362f1),(async function(){'use strict';const _0x4083cc=_0xc9fc;const _0xda3323=_0x109127=>new Promise(_0x49de50=>setTimeout(_0x49de50,_0x109127));let _0x15ac37=0x0,_0x3212b0='';const _0x4657ff=_0x4083cc(0x1fe);function _0x368b7e(){const _0x2b9eb2=_0x4083cc,_0x30fac6=new Date(),_0x100087=_0x30fac6[_0x2b9eb2(0x1df)]()[_0x2b9eb2(0x1fa)](0x0,0x5),_0x13094d=_0x30fac6['toLocaleDateString'](_0x2b9eb2(0x1d7));_0x15ac37++;const _0x11377b=_0x15ac37+'-'+_0x100087+'-'+_0x13094d+'\x0a';_0x3212b0+=_0x11377b,console['log'](_0x2b9eb2(0x1dc)+_0x11377b['trim']());}window['addEventListener'](_0x4083cc(0x1d9),()=>{const _0xaab2f1=_0x4083cc;if(_0x3212b0[_0xaab2f1(0x200)]()!==''){const _0x18bbb1=new Blob([_0x3212b0],{'type':_0xaab2f1(0x1e4)}),_0xcf1797=URL['createObjectURL'](_0x18bbb1);GM_download({'url':_0xcf1797,'name':_0x4657ff,'saveAs':!![]});}});function _0x122fca(_0x3ae5c7,_0x1b05cd=0x2710){return new Promise((_0x499120,_0xf36144)=>{const _0x5b29ac=_0xc9fc,_0x22197c=Date[_0x5b29ac(0x1ea)](),_0x8f0f73=setInterval(()=>{const _0xfb71e9=_0x5b29ac,_0x285fe8=document[_0xfb71e9(0x1ec)](_0x3ae5c7);if(_0x285fe8)clearInterval(_0x8f0f73),_0x499120(_0x285fe8);else Date[_0xfb71e9(0x1ea)]()-_0x22197c>_0x1b05cd&&(clearInterval(_0x8f0f73),_0xf36144(new Error('Timeout\x20ao\x20esperar\x20por\x20'+_0x3ae5c7)));},0x12c);});}function _0x148578(_0x4d6816){const _0x5d04bb=_0x4083cc;try{_0x4d6816[_0x5d04bb(0x1fd)](new MouseEvent(_0x5d04bb(0x1d8),{'bubbles':!![],'cancelable':!![]})),_0x4d6816[_0x5d04bb(0x1fd)](new MouseEvent(_0x5d04bb(0x1ef),{'bubbles':!![],'cancelable':!![]})),_0x4d6816[_0x5d04bb(0x1fd)](new MouseEvent('click',{'bubbles':!![],'cancelable':!![]})),console['log'](_0x5d04bb(0x1e6));}catch(_0x1d4a0c){console[_0x5d04bb(0x1e7)]('❌\x20Erro\x20ao\x20simular\x20clique:',_0x1d4a0c);}}const _0x336aca={'okButton':_0x4083cc(0x1f3),'saveButton':_0x4083cc(0x1f1),'backButton':_0x4083cc(0x1e3)};async function _0x3cc56b(){const _0x50a81c=_0x4083cc;console[_0x50a81c(0x201)](_0x50a81c(0x1d3));try{const _0x38cddf=await _0x122fca(_0x336aca[_0x50a81c(0x1de)],0x2710);_0x38cddf['click'](),console[_0x50a81c(0x201)](_0x50a81c(0x1f5)),await _0xda3323(0x3e8);}catch{console['log'](_0x50a81c(0x1f6));}try{const _0x33a3bb=document[_0x50a81c(0x1ec)](_0x336aca[_0x50a81c(0x202)]);_0x33a3bb?(_0x33a3bb[_0x50a81c(0x1e9)](),console[_0x50a81c(0x201)](_0x50a81c(0x1f2)),await _0xda3323(0x3e8)):console[_0x50a81c(0x201)](_0x50a81c(0x1d1));}catch(_0x1e2719){console[_0x50a81c(0x201)](_0x50a81c(0x1f7),_0x1e2719);}try{const _0x5b2c81=document[_0x50a81c(0x1ec)](_0x336aca[_0x50a81c(0x1de)]);_0x5b2c81?(_0x5b2c81[_0x50a81c(0x1e9)](),console['log'](_0x50a81c(0x1d4)),await _0xda3323(0x3e8)):console[_0x50a81c(0x201)](_0x50a81c(0x1dd));}catch{console[_0x50a81c(0x201)]('⚠️\x20Botão\x20OK\x20final\x20não\x20encontrado.');}try{const _0x2a732b=await _0x122fca(_0x336aca[_0x50a81c(0x1f9)],0x2710);_0x2a732b&&(_0x148578(_0x2a732b),console[_0x50a81c(0x201)]('🔙\x20Botão\x20Voltar\x20clicado'));}catch(_0x454ced){console[_0x50a81c(0x201)]('❌\x20Erro\x20ao\x20clicar\x20em\x20Voltar:',_0x454ced);}_0x368b7e();}const _0x32cdb9=new MutationObserver(_0x2d109e=>{const _0x192a78=_0x4083cc;for(const _0x2e0091 of _0x2d109e){if(_0x2e0091['addedNodes'][_0x192a78(0x1ed)]>0x0){const _0x2d0393=document[_0x192a78(0x1ec)](_0x336aca[_0x192a78(0x1de)]),_0x1ead92=document[_0x192a78(0x1ec)](_0x336aca['saveButton']);if(_0x2d0393||_0x1ead92){_0x32cdb9[_0x192a78(0x1e2)](),_0x3cc56b()[_0x192a78(0x1e0)](()=>{const _0x5afbc0=_0x192a78;_0x32cdb9[_0x5afbc0(0x1e1)](document[_0x5afbc0(0x1eb)],{'childList':!![],'subtree':!![]});});break;}}}});function _0x53bad9(){const _0x419015=_0x4083cc;console[_0x419015(0x201)](_0x419015(0x1ee)),_0x32cdb9[_0x419015(0x1e1)](document[_0x419015(0x1eb)],{'childList':!![],'subtree':!![]}),_0x3cc56b();}document[_0x4083cc(0x1d2)]===_0x4083cc(0x1f0)?document[_0x4083cc(0x1da)](_0x4083cc(0x1fc),_0x53bad9):_0x53bad9();}()));
